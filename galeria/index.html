<!doctype html>
<html lang="es">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="José Álvarez Blas | Galería Paisajes Intuitivos"/>
        <title>José Álvarez Blas | Galería Paisajes Intuitivos</title>
        <link rel="icon" type="image/png" href="../media/uploads/favi/favicon256.png"/>
        <link rel="apple-touch-icon" sizes="114×114" href="../media/uploads/favi/favicon114.png"/>
        <link rel="apple-touch-icon" sizes="72×72" href="../media/uploads/favi/favicon72.png"/>
        <link rel="apple-touch-icon" href="../media/uploads/favi/favicon57.png"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        <link rel="stylesheet" href="css/galeria.css">
    </head>
    <body>
        <div class="container-fluid bg-image-portada p-0">
            <div class="gradient-container-portada d-flex flex-column min-vh-100">
                <div class="d-flex flex-column justify-content-center align-items-center flex-grow-1">
                    <div class="text-container text-center">
                        <h1 class="oswald weight-400 text-white mt-4 mt-ms-0 pt-4 pt-md-0">Paisajes Intuitivos</h1>
                        <p class="titillium weight-400 subtitulo text-white mt-1 mt-md-3">Una vuelta al mundo en las fotografías de José Álvarez</p>
                        <p class="titillium weight-700 subtitulo text-white mt-4 pt-md-5 col-8 col-md-12 mx-auto">Exposición en Galería de Arte del Parque de la Amistad</p>
                        <p class="titillium weight-400 subtitulo subtitulo-2 text-white">Av. Caminos del Inca Cdra. 22, Santiago de Surco</p>
                        <a class="btn rounded-circle btn-circle mt-4 mt-md-5" href="#galeria"><i class="fas fa-arrow-down text-white"></i></a>
                    </div>
                </div>
                <div class="container">
                    <div class="row mt-auto py-3">
                        <div class="col-12 col-md-3 d-flex align-items-center justify-content-center mb-3 mb-md-0">
                            <img src="assets/ic_star.svg" class="me-3" width="55">
                            <p class="titillium weight-400 text-white mb-0">Cada fotografía es una<br>historia visual irrepetible</p>
                        </div>
                        <div class="col-12 col-md-3 d-flex align-items-center justify-content-center mb-3 mb-md-0">
                            <img src="assets/ic_star.svg" class="me-3" width="55">
                            <p class="titillium weight-400 text-white mb-0">Impresión de alta calidad<br>y montaje profesional</p>
                        </div>
                        <div class="col-12 col-md-3 d-flex align-items-center justify-content-center mb-3 mb-md-0">
                            <img src="assets/ic_star.svg" class="me-3" width="55">
                            <p class="titillium weight-400 text-white mb-0">Colecciona arte con alma<br>y mirada</p>
                        </div>
                        <div class="col-12 col-md-3 d-flex align-items-center justify-content-center mb-3 mb-md-0">
                            <img src="assets/ic_star.svg" class="me-3" width="55">
                            <p class="titillium weight-400 text-white mb-0">Certificado de autenticidad<br>firmado por el autor</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mx-auto" id="galeria">
            <div class="container">
                <div class="row">
                    <h2 class="oswald weight-300 subtitulo text-white text-center mt-5">Explora esta impactante colección</h2>
                    <p class="oswald weight-400 subtitulo-3 text-white text-center mb-5">Cada pieza refleja una visión profunda del mundo y la luz.</p>
                    <form id="buscador" onsubmit="event.preventDefault(); buscarFotos();">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-6 p-0" style="max-width: 1220px !important;">
                                    <label for="buscador-input" class="oswald weight-400 subtitulo form-label text-white mt-4">Busca la obra de tu preferencia:</label>
                                    <div class="input-group my-3">
                                        <span class="input-group-text bg-transparent rounded-start-pill border-end-0 pe-0"><i class="fas fa-search text-white"></i></span>
                                        <input type="text" class="form-control bg-transparent border-start-0 ps-2 rounded-end-pill titillium text-white" id="buscador-input" placeholder="Ej: Atardecer, Montaña...">
                                        <button type="button" class="oswald weight-600 btn btn-light rounded-pill ms-4 px-5" onclick="buscarFotos()">Buscar</button>
                                    </div>
                                </div>
                            </div>
                            <div id="resultados" class="row mt-2">
                                <!--div class="col-6 col-md-4">
                                    <div class="card rounded-4 border-0 bg-transparent">
                                        <img class="img img-fluid rounded-4 mt-3" src="assets/portada.jpg">
                                        <p class="oswald weight-400 subtitulo text-white my-3">Nombre de la foto</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="card rounded-4 border-0 bg-transparent">
                                        <img class="img img-fluid rounded-4 mt-3" src="assets/pie.jpg">
                                        <p class="oswald weight-400 subtitulo text-white my-3">Nombre de la foto</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="card rounded-4 border-0 bg-transparent">
                                        <img class="img img-fluid rounded-4 mt-3" src="assets/portada.jpg">
                                        <p class="oswald weight-400 subtitulo text-white my-3">Nombre de la foto</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="card rounded-4 border-0 bg-transparent">
                                        <img class="img img-fluid rounded-4 mt-3" src="assets/pie.jpg">
                                        <p class="oswald weight-400 subtitulo text-white my-3">Nombre de la foto</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="card rounded-4 border-0 bg-transparent">
                                        <img class="img img-fluid rounded-4 mt-3" src="assets/portada.jpg">
                                        <p class="oswald weight-400 subtitulo text-white my-3">Nombre de la foto</p>
                                    </div>
                                </div>
                                <div class="col-6 col-md-4">
                                    <div class="card rounded-4 border-0 bg-transparent">
                                        <img class="img img-fluid rounded-4 mt-3" src="assets/pie.jpg">
                                        <p class="oswald weight-400 subtitulo text-white my-3">Nombre de la foto</p>
                                    </div>
                                </div-->
                            </div>
                            <div id="paginacion" class="row mt-4">
                                <!--p class="col-12 titillium weight-400 subtitulo plomo text-center"><strong class="text-white">1</strong> 2 3 4 5 6 7 8</p-->
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <footer class="d-none container-fluid bg-image-pie p-0">
            <div class="gradient-container-pie d-flex flex-column min-vh-100">
                <div class="container p-0" style="max-width: 1220px;">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="d-flex flex-column justify-content-center flex-grow-1">
                                <div class="text-container text-start">
                                    <h2 class="oswald weight-700 text-white text-start" style="font-size: 32px; line-height: 40px;">Explora esta colección</h2>
                                    <p class="titillium weight-300 subtitulo text-white mt-5" style="line-height: 32px;">Cada pieza refleja una visión profunda de la naturaleza.</p>
                                </div>
                            </div>
                            <img src="../static/img/logo-header.png" class="mt-5" width="160px">
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                buscarFotos(); // Cargar página 1 al iniciar
            });
        
            function buscarFotos(pagina = 1) {
                const buscadorInput = document.getElementById('buscador-input');
                const resultadosDiv = document.getElementById('resultados');
                const paginacionDiv = document.getElementById('paginacion');
        
                fetch(`api_fotos.php?buscar=${encodeURIComponent(buscadorInput.value)}&pagina=${pagina}`)
                    .then(response => response.json())
                    .then(data => {
                        resultadosDiv.innerHTML = '';
                        paginacionDiv.innerHTML = '';
        
                        if (!data.success || data.data.length === 0) {
                            resultadosDiv.innerHTML = `
                                <div class="col-12 text-center py-5">
                                    <i class="fas fa-image fa-3x text-white mb-3"></i>
                                    <p class="oswald weight-400 subtitulo text-white">No se encontraron coincidencias</p>
                                </div>
                            `;
                            return;
                        }
        
                        data.data.forEach(foto => {
                            resultadosDiv.innerHTML += `
                                <div class="col-6 col-md-4">
                                    <div class="card rounded-4 border-0 bg-transparent">
                                        <a href="detalle.html?id=${foto.id}" target="_blank">
                                            <img class="img-fluid rounded-4 mt-3" src="img/${foto.url_completa}" alt="${foto.nombre}">
                                        </a>
                                        <p class="oswald weight-400 subtitulo text-white my-3">${foto.nombre}</p>
                                        ${foto.estado === 'vendido' ? '<span class="badge bg-danger">Vendido</span>' : ''}
                                    </div>
                                </div>
                            `;
                        });
        
                        actualizarPaginacion(data.paginacion.total, pagina);
                    })
                    .catch(error => {
                        console.error("Error al buscar fotos:", error);
                        resultadosDiv.innerHTML = `
                            <div class="col-12 text-center py-5">
                                <p class="oswald weight-400 subtitulo text-white">Error al cargar los resultados</p>
                            </div>
                        `;
                    });
            }
        
            function actualizarPaginacion(totalFotos, paginaActual) {
                const paginacionDiv = document.getElementById('paginacion');
                const totalPaginas = Math.ceil(totalFotos / 6);
                let html = '';
        
                for (let i = 1; i <= totalPaginas; i++) {
                    html += `<a onclick="buscarFotos(${i})" class="${i === paginaActual ? 'text-white fw-bold' : 'plomo'} mx-2" style="cursor: pointer;">${i}</a>`;
                }
        
                paginacionDiv.innerHTML = `<p class="col-12 titillium weight-400 subtitulo text-center">${html}</p>`;
            }
        </script>

    </body>
</html>